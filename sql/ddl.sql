DROP TABLE IF EXISTS MEMBER CASCADE;
CREATE TABLE MEMBER
(
    MEMBER_ID             BIGINT UNSIGNED GENERATED BY DEFAULT AS IDENTITY,
    LOGIN_ID              VARCHAR(20)  NOT NULL,
    PASSWORD              VARCHAR(100) NOT NULL,
    NAME                  VARCHAR(12)  NOT NULL,
    PHONE_NUMBER          VARCHAR(11)  NOT NULL,
    EMAIL                 VARCHAR(45)  NOT NULL,
    GRADE                 VARCHAR(10)  NOT NULL,
    AUTHORITY             VARCHAR(30)  NOT NULL,
    AGREE_TO_RECEIVE_SMS  VARCHAR(10)  NOT NULL,
    AGREE_TO_RECEIVE_MAIL VARCHAR(10)  NOT NULL,
    IS_EMAIL_VERIFIED     VARCHAR(10)  NOT NULL,
    CREATED_AT            TIMESTAMP    NOT NULL DEFAULT CURRENT_TIMESTAMP,
    MODIFIED_AT           TIMESTAMP,
    PRIMARY KEY (MEMBER_ID)
);

DROP TABLE IF EXISTS SHIPPING_ADDRESS CASCADE;
CREATE TABLE SHIPPING_ADDRESS
(
    SHIPPING_ADDRESS_ID   BIGINT UNSIGNED GENERATED BY DEFAULT AS IDENTITY,
    MEMBER_ID             BIGINT UNSIGNED NOT NULL,
    SHIPPING_ADDRESS_NAME VARCHAR(50)  NOT NULL,
    RECIPIENT_NAME        VARCHAR(12)  NOT NULL,
    ZIP_CODE              VARCHAR(5),
    BASIC_ADDRESS         VARCHAR(40),
    DETAIL_ADDRESS        VARCHAR(40),
    ADDRESS               VARCHAR(100) NOT NULL,
    PHONE_NUMBER          VARCHAR(11)  NOT NULL,
    IS_DEFAULT_ADDRESS    VARCHAR(10)  NOT NULL,
    STATUS                VARCHAR(10)  NOT NULL DEFAULT 'INACTIVE',
    CREATED_AT            TIMESTAMP    NOT NULL DEFAULT CURRENT_TIMESTAMP,
    MODIFIED_AT           TIMESTAMP,
    PRIMARY KEY (SHIPPING_ADDRESS_ID)
);

DROP TABLE IF EXISTS DISCOUNT CASCADE;
CREATE TABLE DISCOUNT
(
    DISCOUNT_ID BIGINT UNSIGNED GENERATED BY DEFAULT AS IDENTITY,
    NAME        VARCHAR(30) NOT NULL,
    TYPE        VARCHAR(10) NOT NULL,
    VALUE       INT UNSIGNED NOT NULL,
    PRIMARY KEY (DISCOUNT_ID)
)

DROP TABLE IF EXISTS PRODUCT CASCADE;
CREATE TABLE PRODUCT
(
    PRODUCT_ID     BIGINT UNSIGNED GENERATED BY DEFAULT AS IDENTITY,
    NAME           VARCHAR(50) NOT NULL,
    CATEGORY       VARCHAR(20) NOT NULL,
    PRICE          INT UNSIGNED NOT NULL,
    STOCK_QUANTITY INT UNSIGNED NOT NULL,
    DETAILS        CLOB        NOT NULL,
    SIZE_GUIDE     CLOB        NOT NULL,
    SHIPPING       CLOB        NOT NULL,
    NOTICE         CLOB        NOT NULL,
    CREATED_AT     TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
    MODIFIED_AT    TIMESTAMP,
    PRIMARY KEY (PRODUCT_ID)
)

DROP TABLE IF EXISTS PRODUCT_IMAGE CASCADE;
CREATE TABLE PRODUCT_IMAGE
(
    PRODUCT_IMAGE_ID  BIGINT UNSIGNED GENERATED BY DEFAULT AS IDENTITY,
    UPLOAD_IMAGE_NAME VARCHAR     NOT NULL,
    STORE_IMAGE_NAME  VARCHAR     NOT NULL,
    IMAGE_TYPE        VARCHAR(10) NOT NULL,
    CREATED_AT        TIMESTAMP   NOT NULL DEFAULT CURRENT_TIMESTAMP,
    MODIFIED_AT       TIMESTAMP,
    PRODUCT_ID        BIGINT UNSIGNED NOT NULL,
    PRIMARY KEY (PRODUCT_IMAGE_ID)
)

ALTER TABLE PRODUCT_IMAGE
    ADD CONSTRAINT FK_PRODUCT_IMAGE_PROUDCT_ID
        FOREIGN KEY (PRODUCT_ID)
            REFERENCES PRODUCT (PRODUCT_ID)
